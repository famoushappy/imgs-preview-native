!function(t){var i={};function e(s){if(i[s])return i[s].exports;var n=i[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,e),n.l=!0,n.exports}e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:s})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(e.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var n in t)e.d(s,n,function(i){return t[i]}.bind(null,n));return s},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="../dist/",e(e.s=0)}([function(t,i,e){t.exports=function(t){"use strict";function i(){this.err()}if(i.prototype.err=function(){throw new Error("current environment without a window with a document")},"undefined"==typeof window||"undefined"==typeof document)return i;function e(t){this.imgs=this.getImgs(t),this.body=document.body||document.getElementsByTagName("body")[0],this.winW=window.innerWidth||document.body.clientWidth,this.winH=window.innerHeight||document.body.clientHeight,this.imgsSrc=[],this.length=0,this.clickedIndex=0,this.imgsViewWrapper=null,this.imgsViewBox=null,this.wrapper=null,this.items=null,this.viewImgs=null,this.wrapLeft=0,this.transitionTime="0s",this.startLeft=0,this.imgLeft=this.winW/2,this.imgTop=this.winH/2,this.imgWidth=0,this.imgHei=0,this.activeIndex=0,this.activeImg=null,this.isImgBig=!1,this.fingers=0,this.twoFingers=!1,this.opacity=1,this.touchs={x1:0,y1:0,x2:0,y2:0},this.moveDown=!1,this.moveNotDown=!1,this.timer=null,this.canDo=!0,this.clickCount=0,this.timeStamp=0,this.timeout=null,this.init()}return e.prototype.getImgs=function(t){if("string"==typeof t)return document.querySelectorAll(t+" img");if("object"==typeof t)try{var i=Object.prototype.toString.call(t).toLowerCase();if(i.indexOf("html")>-1&&i.indexOf("element")>-1)return t.getElementsByTagName("img");throw new Error("please introduction a true element!")}catch(t){throw new Error("please introduction a true element!")}},e.prototype.init=function(){this.length=this.imgs.length,this.imgsSrc=[];for(var t=0;t<this.length;t++)this.getImgsSrc(this.imgs[t]),this.hideClick(t)},e.prototype.getStyle=function(t,i){return(window.getComputedStyle?window.getComputedStyle(t,null)[i].replace("px",""):t.currentStyle[i].replace("px",""))-0},e.prototype.getImgsSrc=function(t){this.imgsSrc.push(t.src)},e.prototype.hideClick=function(t){var i=this;this.imgs[t].addEventListener("click",function(e){(e||window.event).preventDefault(),i.opacity=1,i.clickedIndex=t,i.wrapLeft=-i.clickedIndex*i.winW,i.showView()},!1)},e.prototype.showView=function(){for(var t="",i=document.createDocumentFragment(),e=document.createElement("div"),s=0;s<this.length;s++)t+='<li class="item" ><img src="'+this.imgsSrc[s]+'" alt="" /></li>';e.innerHTML='<div class="imgs-preview" ><ul class="wrapper" >'+t+"</ul></div>",e.className="imgs-preview-wrapper",e.style.cssText="width: 100%; height: 100%; position: fixed; left: 0; top: 0; background: transparent;",i.appendChild(e),this.body.appendChild(i),this.imgsViewWrapper=document.querySelector(".imgs-preview-wrapper"),this.imgsViewBox=document.querySelector(".imgs-preview"),this.wrapper=document.querySelector(".imgs-preview .wrapper"),this.items=document.querySelectorAll(".imgs-preview .wrapper .item"),this.viewImgs=document.querySelectorAll(".imgs-preview .wrapper .item img"),this.setDefaultCSS(),this.initListeners()},e.prototype.setDefaultCSS=function(){var t=this;this.imgsViewBox.style.cssText="width: 100%;height: 100%;position: fixed;left: 0;top: 0;z-index: 999;overflow: hidden;background: rgba(0,0,0,"+this.opacity+");",this.wrapper.style.cssText="position: absolute;left: 0;top: 0;height: 100%;width: "+100*this.length+"%;left: "+this.wrapLeft+"px;transition: all "+this.transitionTime+";";for(var i=0;i<this.length;i++)!function(i){t.items[i].style.cssText="position: relative;height: 100%;width: 100%;float: left;width: "+t.winW+"px;overflow: hidden;",t.viewImgs[i].style.cssText="width: 100%;height: auto;position: absolute;left: "+t.winW/2+"px;top: "+t.winH/2+"px;transform: translate(-50%, -50%);",i=null}(i)},e.prototype.initListeners=function(){var t=this;this.imgsViewBox.ontouchmove=function(i){t.disabledScroll(i)},this.imgsViewBox.onmousewheel=function(i){t.disabledScroll(i)};for(var i=0;i<this.length;i++)!function(i){t.viewImgs[i].addEventListener("click",function(t){(t||window.event).preventDefault()},!1),t.items[i].ontouchstart=function(e){t.touchStart(e,i)},t.items[i].ontouchmove=function(e){t.touchMove(e,i)},t.items[i].ontouchend=function(e){t.touchEnd(e,i)},t.items[i].ontouchcancel=function(e){t.touchEnd(e,i)}}(i)},e.prototype.disabledScroll=function(t){(t||window.event).preventDefault()},e.prototype.touchStart=function(t,i){var e=t||window.event;if(this.fingers++,this.fingers>2)return this.fingers=2,!1;if(e.touches.length>2)return!1;if((this.moveDown||this.moveNotDown)&&2===e.touches.length)return e.preventDefault(),!1;if(e.touches[1]){if(this.activeIndex!==i)return!1;this.touchs.x2=e.touches[1].pageX||e.touches[1].clientX,this.touchs.y2=e.touches[1].pageY||e.touches[1].clientY}else this.activeIndex=i,this.activeImg="img"===e.target.tagName.toLowerCase()?e.target:e.target.children[0];Math.abs(this.wrapLeft)%this.winW==0&&(this.startLeft=this.wrapLeft),this.touchs.x1=e.touches[0].pageX||e.touches[0].clientX,this.touchs.y1=e.touches[0].pageY||e.touches[0].clientY,this.timeStamp=e.timeStamp,this.moveDown=!1,this.moveNotDown=!1,this.transitionTime="0s",this.wrapper.style.transition="all "+this.transitionTime,this.imgLeft=this.getStyle(this.activeImg,"left"),this.imgTop=this.getStyle(this.activeImg,"top"),this.imgWidth=this.getStyle(this.activeImg,"width"),this.imgHei=this.getStyle(this.activeImg,"height")},e.prototype.touchMove=function(t,i){var e=t||window.event;if(e.preventDefault(),e.touches.length>2)return!1;var s=this.activeImg,n=e.touches[0].pageX||e.touches[0].clientX,h=e.touches[0].pageY||e.touches[0].clientY,r=n-this.touchs.x1,o=h-this.touchs.y1;if(1===e.touches.length){if(this.twoFingers)return!1;if(this.fingers=1,this.isImgBig){var a=this.imgLeft+2*r,l=this.imgTop+2*o,p=this.getStyle(s,"width"),c=this.getStyle(s,"height");if(Math.abs(r)>10)if(a>=p/2&&r>0)s.style.left=Math.floor(p/2)+"px",f=(f=2*r-(p/2-this.imgLeft))<=30?f/12:f/4,0!==i?(this.wrapLeft=this.startLeft+f,this.wrapper.style.left=this.wrapLeft+"px"):0===i&&(this.wrapLeft=this.startLeft+f/1.5,this.wrapper.style.left=this.wrapLeft+"px");else if(a<=this.winW-p/2&&r<0){var f;s.style.left=Math.ceil(this.winW-p/2)+"px",f=(f=Math.abs(2*r)-(this.imgLeft-(this.winW-p/2)))<=30?f/12:f/4,i!==this.imgs.length-1?(this.wrapLeft=this.startLeft-f,this.wrapper.style.left=this.wrapLeft+"px"):(this.wrapLeft=this.startLeft-f/1.5,this.wrapper.style.left=this.wrapLeft+"px")}else s.style.left=a+"px";c>this.winH&&(l-c/2>=0&&o>0?s.style.top=c/2+(2*o-(c/2-this.imgTop))/8+"px":l-c/2<=this.winH-c&&o<0?s.style.top=this.winH-c/2-(Math.abs(2*o)-Math.abs(this.winH-c/2-this.imgTop))/8+"px":s.style.top=l+"px")}else o>15&&!this.moveNotDown?this.moveDown=!0:(Math.abs(r)>10||o<-10)&&!this.moveDown&&(this.moveNotDown=!0),this.moveNotDown&&(0!==i&&i!==this.imgs.length-1?(this.wrapLeft=this.startLeft+r,this.wrapper.style.left=this.wrapLeft+"px"):0===i?this.imgs.length>1&&r<0?(this.wrapLeft=this.startLeft+r,this.wrapper.style.left=this.wrapLeft+"px"):(this.wrapLeft=this.startLeft+r/3,this.wrapper.style.left=this.wrapLeft+"px"):r>0?(this.wrapLeft=this.startLeft+r,this.wrapper.style.left=this.wrapLeft+"px"):(this.wrapLeft=this.startLeft+r/3,this.wrapper.style.left=this.wrapLeft+"px")),this.moveDown&&(s.style.left=this.imgLeft+r+"px",s.style.top=this.imgTop+o+"px",s.style.width=(o>0?o/1.5<=.8*this.winW?this.winW-o/1.5:.2*this.winW:this.winW)+"px",this.opacity=o>0?1-o/600:1,this.imgsViewBox.style.background="rgba(0,0,0,"+this.opacity+")",this.wrapLeft=this.startLeft,this.wrapper.style.left=this.wrapLeft+"px")}else if(2===e.touches.length){if(this.moveDown||this.moveNotDown)return!1;if(this.activeIndex!==i)return!1;this.fingers=2;var w=e.touches[1].pageX||e.touches[1].clientX,g=e.touches[1].pageY||e.touches[1].clientY,m=Math.abs(w-n),u=Math.abs(g-h),y=Math.sqrt(m*m+u*u),d=Math.abs(this.touchs.x2-this.touchs.x1),v=Math.abs(this.touchs.y2-this.touchs.y1),L=Math.sqrt(d*d+v*v);s.style.width=this.imgWidth+3*(y-L)>.5*this.winW?this.imgWidth+3*(y-L)+"px":.5*this.winW+"px",this.overSetLeftTop(s,"move")}},e.prototype.touchEnd=function(t,i){var e=t||window.event,s=this,n=this.activeImg,h=e.changedTouches[0].pageX||e.changedTouches[0].clientX,r=e.changedTouches[0].pageY||e.changedTouches[0].clientY,o=h-this.touchs.x1,a=r-this.touchs.y1;if(2===this.fingers)return this.fingers--,this.moveDown||this.moveNotDown||(this.twoFingers=!0),0===e.touches.length&&(this.fingers=0,this.wrapLeft!==this.startLeft&&this.bigImgSetWrapLeft(i,n,o),this.getStyle(n,"width")>4*this.winW?this.imgStyleReset(n,"special"):this.getStyle(n,"width")<this.winW?this.imgStyleReset(n):this.twoFingers=!1),!1;if(this.fingers=0,this.twoFingers)this.wrapLeft!==this.startLeft&&this.bigImgSetWrapLeft(i,n,o),this.getStyle(n,"width")>4*this.winW?this.imgStyleReset(n,"special"):this.getStyle(n,"width")<this.winW?this.imgStyleReset(n):this.twoFingers=!1;else if(this.checkClick(e,o,a),this.isImgBig){this.getStyle(n,"left");var l=this.getStyle(n,"top"),p=(this.getStyle(n,"width"),this.getStyle(n,"height"));this.wrapLeft!==this.startLeft&&this.bigImgSetWrapLeft(i,n,o),p>this.winH&&(l>p/2&&a>0?(this.canDo=!1,this.timer=setInterval(function(){(l-=20)<=p/2&&(l=p/2,clearInterval(s.timer),s.timer=null,s.canDo=!0),n.style.top=l+"px"},1e3/60)):l<this.winH-p/2&&a<0&&(this.canDo=!1,this.timer=setInterval(function(){(l+=20)>=s.winH-p/2&&(l=s.winH-p/2,clearInterval(s.timer),s.timer=null,s.canDo=!0),n.style.top=l+"px"},1e3/60)))}else this.moveNotDown&&(Math.abs(o)<50?(this.transitionTime="0.15s",this.wrapper.style.transition="all "+this.transitionTime,this.setWrapLeft()):0!==i&&i!==this.imgs.length-1?(this.transitionTime="0.3s",this.wrapper.style.transition="all "+this.transitionTime,o>0?this.setWrapLeft("right"):this.setWrapLeft("left")):0===i?this.imgs.length>1&&o<0?(this.transitionTime="0.3s",this.wrapper.style.transition="all "+this.transitionTime,this.setWrapLeft("left")):(this.transitionTime="0.15s",this.wrapper.style.transition="all "+this.transitionTime,this.setWrapLeft()):o>0?(this.transitionTime="0.3s",this.wrapper.style.transition="all "+this.transitionTime,this.setWrapLeft("right")):(this.transitionTime="0.15s",this.wrapper.style.transition="all "+this.transitionTime,this.setWrapLeft())),this.moveDown&&(a>60?this.imgClick(e,"notNative"):this.imgStyleReset(n))},e.prototype.overSetLeftTop=function(t,i){var e=this.getStyle(t,"width"),s=this.getStyle(t,"height"),n=this.getStyle(t,"left"),h=this.getStyle(t,"top");e>this.winW?("move"===i&&(this.isImgBig=!0),n>=e/2?t.style.left=Math.floor(e/2)+"px":n<=this.winW-e/2&&(t.style.left=Math.ceil(this.winW-e/2)+"px")):("move"===i&&(this.isImgBig=!1),t.style.left=this.winW/2+"px"),s>this.winH?h-s/2>=0?t.style.top=Math.floor(s/2)+"px":h-s/2<=this.winH-s&&(t.style.top=Math.ceil(this.winH-s/2)+"px"):t.style.top=this.winH/2+"px"},e.prototype.setWrapLeft=function(t){this.canDo=!1;var i=t?300:150,e=this;setTimeout(function(){"left"===t?(e.wrapLeft=e.startLeft-e.winW,e.wrapper.style.left=e.wrapLeft+"px"):"right"===t?(e.wrapLeft=e.startLeft+e.winW,e.wrapper.style.left=e.wrapLeft+"px"):(e.wrapLeft=e.startLeft,e.wrapper.style.left=e.wrapLeft+"px")},0),setTimeout(function(){e.canDo=!0},i)},e.prototype.bigImgSetWrapLeft=function(t,i,e){var s=this;0!==t&&t!==this.imgs.length-1?Math.abs(this.wrapLeft-this.startLeft)<50?(this.transitionTime="0.15s",this.wrapper.style.transition="all "+this.transitionTime,this.setWrapLeft()):(this.transitionTime="0.3s",this.wrapper.style.transition="all "+this.transitionTime,this.setWrapLeft(this.wrapLeft>this.startLeft?"right":"left"),setTimeout(function(){i.style.width=s.winW+"px",i.style.left=s.winW/2+"px",i.style.top=s.winH/2+"px",s.isImgBig=!1},300)):0===t&&e<0&&Math.abs(this.wrapLeft-this.startLeft)>50?(this.transitionTime="0.3s",this.wrapper.style.transition="all "+this.transitionTime,this.setWrapLeft("left"),setTimeout(function(){i.style.width=s.winW+"px",i.style.left=s.winW/2+"px",i.style.top=s.winH/2+"px",s.isImgBig=!1},300)):t===this.imgs.length-1&&e>0&&Math.abs(this.wrapLeft-this.startLeft)>50?(this.transitionTime="0.3s",this.wrapper.style.transition="all "+this.transitionTime,this.setWrapLeft("right"),setTimeout(function(){i.style.width=s.winW+"px",i.style.left=s.winW/2+"px",i.style.top=s.winH/2+"px",s.isImgBig=!1},300)):(this.transitionTime="0.15s",this.wrapper.style.transition="all "+this.transitionTime,this.setWrapLeft())},e.prototype.imgStyleReset=function(t,i){this.canDo=!1;var e=this;this.timer=setInterval(function(){var s=e.getStyle(t,"width");e.opacity=e.opacity<1?e.opacity+.05:1,e.imgsViewBox.style.background="rgba(0,0,0,"+e.opacity+")",i?(s-=s/e.winW*40)<=4*e.winW&&(s=4*e.winW,clearInterval(e.timer),e.canDo=!0,e.twoFingers=!1,e.timer=null):(s+=15,t.style.left=e.winW/2+"px",t.style.top=e.winH/2+"px",s>=e.winW&&(s=e.winW,clearInterval(e.timer),e.canDo=!0,e.twoFingers=!1,e.timer=null)),t.style.width=s+"px"},1e3/60)},e.prototype.checkClick=function(t,i,e){t.timeStamp-this.timeStamp<160&&Math.abs(i)<=2&&Math.abs(e)<=2&&this.imgClick(t)},e.prototype.imgClick=function(t,i){if(t.preventDefault(),!this.canDo)return!1;this.clickCount++;var e="img"===t.target.tagName.toLowerCase()?t.target:t.target.children[0],s=i?0:180,n=this;clearTimeout(this.timeout),this.timeout=setTimeout(function(){1===n.clickCount?(n.canDo=!1,n.timer=setInterval(function(){var t=n.getStyle(e,"width");t-=t/n.winW*60,n.opacity-=.05,n.imgsViewBox.style.background="rgba(0,0,0,"+n.opacity+")",e.style.width=t+"px",!i&&n.overSetLeftTop(e,"click"),n.opacity<=0&&(clearInterval(n.timer),n.opacity=0,n.imgsViewBox.style.background="rgba(0,0,0,"+n.opacity+")",n.timer=null,n.canDo=!0,n.body.removeChild(n.imgsViewWrapper))},1e3/60)):2===n.clickCount&&(n.canDo=!1,n.timer=setInterval(function(){var t=n.getStyle(e,"width"),i=n.imgWidth/n.imgHei,s=i>2?4:i<.7?2:3,h=n.winW*s;(t=n.isImgBig?t-80:t+80)>=h&&!n.isImgBig?(clearInterval(n.timer),t=h,n.isImgBig=!0,n.timer=null,n.canDo=!0):t<=n.winW&&n.isImgBig&&(clearInterval(n.timer),t=n.winW,n.isImgBig=!1,n.timer=null,n.canDo=!0),e.style.width=t+"px",n.overSetLeftTop(e,"dblclick")},1e3/60)),n.clickCount=0,n.timeout=null},s)},window.ImgsPreview=e,e}()}]);